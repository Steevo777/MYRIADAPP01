<!DOCTYPE html>
<html>
<head>
 <script type='text/javascript' src='https://www.google.com/jsapi'></script>	
 <script type='text/javascript' src='res/phonegap-1.2.0.js'></script>
 <script type='text/javascript' src='res/jquery-2.1.1.min.js'></script>
 <script type='text/javascript' src='res/jquery.touchSwipe.min.js'></script>
 <link rel="stylesheet" type="text/css" href="res/txtblocker.css"> 
 <head>
    <script type='text/javascript'>
      var speed= 0;
      var long= 0;
      var lat=0;
      var count = 0;
      
	      google.load('visualization', '1', {packages:['gauge']});
	      google.setOnLoadCallback(drawChart);
	      function drawChart() {
	      	var speedMPH = (speed * 2.23693629);
	        var data = google.visualization.arrayToDataTable([
	          ['Label', 'Value'],
	          ['Speed', speedMPH]
	          
	        ]);
	
	        var options = {
	          width: 300, height: 300,
	          redFrom: 90, redTo: 100,
	          yellowFrom:75, yellowTo: 90,
	          minorTicks: 5
	        };
	
	        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
	        chart.draw(data, options);
	        document.getElementById("speed_div").innerHTML = speed;
	        
	        //$.post("http://www.a-information.com/txtblocker/geohndlr.php", { "speed": speed, "lat": lat, "long": long } );
	      	$.ajax({type:"POST",url:"http://www.a-information.com/txtblocker/geohndlr.php",
	      			dataType:"json",
				    data:{ "speed": speed, "lat": lat, "long": long } //This should be an object
				});
	      }
	      
      
     
	        function geolocation() {
	 
	            var options = { enableHighAccuracy: true };
	                watchID = navigator.geolocation.watchPosition(onSuccess, onError,{frequency:5000,maximumAge: 0, timeout: 2000, enableHighAccuracy:true});
	 
	            function onSuccess(position) {
	                lat = position.coords.latitude;
	                long = position.coords.longitude;
	                speed = position.coords.speed;
	 				drawChart();
	                                
	                count ++;
	                //localStorage.setItem("latitude", lat);
	                //localStorage.setItem("longitude", long);
	                //longlat = "lat: " + lat + "long: " + long + "Speed: " + speed;
	            }
	 
	            function onError(error) {
	              //alert("error: " + error.message);
	                localStorage.setItem("error", error.message);
	            }
	 
	        }
	 
	        function removestorage() {
	            localStorage.removeItem("latitude");
	        }
	 
 
 			var myLoc = setInterval(function(){geolocation()},300000);
    </script>
    
     
  </head>
 
</head>


<header class="cf">
<nav>
	<ul>
		<li id="login">
			<a id="login-trigger" href="#">
				Log in <span>&#x25BC;</span>
			</a>
			<div id="login-content">
				<form>
					<fieldset id="inputs">
						<input id="username" type="email" name="Email" placeholder="Your email address" required>   
						<input id="password" type="password" name="Password" placeholder="Password" required>
					</fieldset>
					<fieldset id="actions">
						<input type="submit" id="submit" value="Log in">
						<label><input type="checkbox" checked="checked"> Keep me signed in</label>
					</fieldset>
				</form>
			</div>                     
		</li>
		<li id="signup">
			<a href="signup.html">Sign up FREE</a>
		</li>
	</ul>
</nav>
</header>
<body>
   <div id='container'>
   <div id='chart_div'></div>
   
   <div id='speed_div'>Speedis:</div>
   <div id='speed2_div'></div>
   
   </div>
   <script>
   $(document).ready(function(){
        $('#login-trigger').click(function(){
                $(this).next('#login-content').slideToggle();
                $(this).toggleClass('active');                                  

                if ($(this).hasClass('active')) $(this).find('span').html('u')
                        else $(this).find('span').html('&#x25BC;')
                })
                
        $('#container').swipe({
        	swipe:function(event, direction, distance, duration, fingerCoount)
        		{
        		switch(direction){
        			case "left":
        				window.location = 'signup.html';
        				break;
        			case "right":
        				window.location = 'map.html';
        				break;
        				}
        		}
        	});
	});
   </script>
   
</body>
</html>