<!DOCTYPE html>
<html>
<head>
 <script type='text/javascript' src='https://www.google.com/jsapi'></script>	
 <script type='text/javascript' src='res/phonegap-1.2.0.js'></script>
 <script type='text/javascript' src='res/jquery-2.1.1.min.js'></script>    <head>
    <script type='text/javascript'>
      var speed= 0;
      var long= 0;
      var lat=0;
      var count = 0;
      
	      google.load('visualization', '1', {packages:['gauge']});
	      google.setOnLoadCallback(drawChart);
	      function drawChart() {
	      	var speedMPH = (speed * 2.23693629);
	        var data = google.visualization.arrayToDataTable([
	          ['Label', 'Value'],
	          ['Speed', speedMPH]
	          
	        ]);
	
	        var options = {
	          width: 300, height: 300,
	          redFrom: 90, redTo: 100,
	          yellowFrom:75, yellowTo: 90,
	          minorTicks: 5
	        };
	
	        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
	        chart.draw(data, options);
	        document.getElementById("speed_div").innerHTML = speed;
	        //$.post("http://www.a-information.com/txtblocker/geohndlr.php", { "speed": speed, "lat": lat, "long": long } );
	      	$.ajax({type:"POST",url:"http://www.a-information.com/txtblocker/geohndlr.php",
	      			dataType:"json",
				    data:{ "speed": speed, "lat": lat, "long": long } //This should be an object
				});
	      }
	      
      
     
	        function geolocation() {
	 
	            var options = { enableHighAccuracy: true };
	                watchID = navigator.geolocation.watchPosition(onSuccess, onError,{frequency:5000,maximumAge: 0, timeout: 2000, enableHighAccuracy:true});
	 
	            function onSuccess(position) {
	                lat = position.coords.latitude;
	                long = position.coords.longitude;
	                speed = position.coords.speed;
	 				drawChart();
	                                
	                count ++;
	                //localStorage.setItem("latitude", lat);
	                //localStorage.setItem("longitude", long);
	                //longlat = "lat: " + lat + "long: " + long + "Speed: " + speed;
	            }
	 
	            function onError(error) {
	              //alert("error: " + error.message);
	                localStorage.setItem("error", error.message);
	            }
	 
	        }
	 
	        function removestorage() {
	            localStorage.removeItem("latitude");
	        }
	 
 
 			var myLoc = setInterval(function(){geolocation()},10000);
    </script>
    
     
  </head>
 
</head>
<body>
   <!--<input type="button" value="where am i?" onclick="geolocation()">-->
   <div id='chart_div'></div>
   <div id='speed_div'>Speedis:</div>
   <div id='speed2_div'></div>
   <script>
   var myVar = setInterval(function(){myTimer()}, 10000);

	function myTimer() {
	    var d = new Date();
	    var t = d.toLocaleTimeString();
	    document.getElementById("speed2_div").innerHTML = t;
	}
   </script>
   
</body>
</html>